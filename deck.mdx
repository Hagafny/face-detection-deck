import './styles.css'
import { Steps, Notes, useSteps } from 'mdx-deck'
import { CodeSurfer, CodeSurferColumns, Step } from 'code-surfer'
import { vsDark, nightOwl } from '@code-surfer/themes'
import { Button } from './components/Button/Button.js'
import { RandomlyPlaced } from './layouts/RandomlyPlaced.js'
import { ImageDeck, DECK_IMAGES } from './images/ImageDeck.js'
import { FadeIn } from './components/FadeIn.js'
import { IntroGrid } from './layouts/IntroGrid.js'
import { ZoomSteps } from './components/ZoomSteps/ZoomSteps.js'
import { SideBySide } from './layouts/SideBySide.js'
import myTheme from './theme/theme'
import codeSurferTheme from './theme/codeSurferTheme.js'
import { SlideLayout } from './layouts/SlideLayout.js'
import CropSimulator from './components/CropSimulator.js'
import CropSimulatorPhase from './components/CropSimulatorPhase.js'
import MLModalLoader from './components/MLModalLoader.js'
import { AnimatedBulletList } from './layouts/AnimatedBulletList.js';
import IntroSlide from './slides/introSlide.js'
import FaceDetectionSlide from './slides/FaceDetectionSlide.js'
import Tile from './components/Tile.js'
import SimulatorSlide from './slides/SimulatorSlide.js'
import NormalSimulatorSlide from './slides/NormalSimulatorSlide.js'
import GoodCropBadCropSlide from './slides/GoodCropBadCropSlide.js'
import MixtilesSlide from './slides/MixtilesSlide.js'
import SmartCropSlide from './slides/SmartCropSlide.js'
import ThankYouSlide from './slides/ThankYouSlide.js'

export const theme = myTheme
const cropExample = 'ron2.jpg'

<Head>
  <title>Face Detection </title>
</Head>
<MLModalLoader/>
<IntroSlide showDetections={false} />

---

<MixtilesSlide />

---
<h1>The User Experience</h1>
<iframe style={{ width: '85vw', height: '750px'}} src="https://www.mixtiles.com/photos" title="Mixtiles Tile Picker"></iframe>

---

<SlideLayout title='Customers Recieved Poorly Cropped Tiles' direction='column'>
    <div
      style={{
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'space-around',
        marginTop: '200px'
      }}
    >
      <ZoomSteps>
        <ImageDeck src={'support.png'} style={{ width: '256px', height: '256px' }}/>
        <ImageDeck src={'satisfaction.png'} style={{ width: '256px', height: '256px' }}/> 
      </ZoomSteps>
    </div>
</SlideLayout>

---

<SmartCropSlide />

---

<SlideLayout title='Tensorflow' screenHeight justifyContent='center'>
  <ImageDeck
    width={'50%'}
    height={'50%'}
    src='tenserflow.png'
    styles={{ backgroundSize: 'cover' }}
  />
</SlideLayout>

---

<SlideLayout title='Tensorflow Summary' direction='column'>
   <AnimatedBulletList>
    <span>  Using Object detection is not fast at all. </span>
    <span>The Model weighed around 5MB! </span>
    <span>  Using Object detection is not fast at all. </span>
    <span>The Model weighed around 5MB! </span>
      </AnimatedBulletList>
</SlideLayout>

---

## 90% of Mixtiles uploads are humans

---

<SlideLayout title='FaceAPI' screenHeight justifyContent='center'>
  <ImageDeck
    width={'50%'}
    height={'50%'}
    src='faceapi.png'
    styles={{ backgroundSize: 'cover' }}
  />
</SlideLayout>



---

<FaceDetectionSlide />

---

<SlideLayout title='Face Detection Code examples'>

</SlideLayout>

---

<SlideLayout title='face-api.js Summary' direction='column'>
   <AnimatedBulletList>
    <span>Detects only one type of object - faces, and it does it very well</span>
    <span>If we go with the tiny model, it can weigh as light as 200KB </span>
      </AnimatedBulletList>
</SlideLayout>

---

<NormalSimulatorSlide imageURL={cropExample} />

---

<SimulatorSlide imageURL={cropExample} />

---

#How would this look in code?

---

<CodeSurferColumns theme={codeSurferTheme}>

<Step>

```js
code for first crop
```

<CropSimulatorPhase phase={0} src={cropExample} style={{width:'400px', height: '600px'}} />

</Step>

<Step>

```js 
// SlideSction.js
import React, { useState, useEffect } from 'react'
import { BuilderComponent, builder } from '@builder.io/react'

export const BuilderSlideSection = () => {
  const [builderContentJson, setBuilderContentJson] = useState(null)

  useEffect(() => {
    builder
      .get('slide', { url: window.location.pathname })
      .then(setBuilderContentJson)
  }, [])

  return <BuilderComponent model='slide' content={builderContentJson} />
}
```

<CropSimulatorPhase phase={1} src={cropExample} style={{width:'400px', height: '600px'}} />

</Step>

<Step>

```js 2
check
code for third crop
```

<CropSimulatorPhase phase={2} src={cropExample} style={{width:'400px', height: '600px'}} />

</Step>

<Step>

```js 2
finish
code for smart crop
```

<CropSimulatorPhase phase={3}  src={cropExample} style={{width:'400px', height: '600px'}} />

</Step>

</CodeSurferColumns>

---

<GoodCropBadCropSlide />

---

<SlideLayout title='Possible Improvements' direction='column'>
  <AnimatedBulletList>
    <span>Won’t work on images without faces (10% of uploads) </span>
    <span>If we go with the most lightweight model, it will not detect some faces </span>
    <span>Has an impact on bundle size. We can always look for ways to optimize this </span>
  </AnimatedBulletList>
</SlideLayout>

---

<SlideLayout title='Lookiung To The Future'>
Chat GPT and Dalle Image here
</SlideLayout>

---

<SlideLayout title='Summary' direction='column'>
   <AnimatedBulletList>
    <span>How cropping became a big issue. </span>
    <span>Our process of experimentation with Tensorflow </span>
    <span>Code examples of how face detection works in general and how we used it to build a “smart crop” algorithm </span>
   </AnimatedBulletList>
</SlideLayout>

---

<ThankYouSlide />